{"ast":null,"code":"var _jsxFileName = \"/Users/lalitbade/DRMLMS/drm-course-management-system/src/components/VideoPlayer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useCallback } from \"react\";\nimport shaka from \"shaka-player\";\nimport CryptoJS from \"crypto-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoPlayer = ({\n  apiEndpoint\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const playerRef = useRef(null);\n  const watermarkRef = useRef(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [position, setPosition] = useState({\n    top: \"10%\",\n    left: \"10%\"\n  });\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [volume, setVolume] = useState(1); // Full volume by default\n\n  // Function to generate random position within the video\n  const getRandomPosition = () => {\n    const top = Math.random() * 80 + 10; // Random position between 10% to 90% from the top\n    const left = Math.random() * 80 + 10; // Random position between 10% to 90% from the left\n    return {\n      top: `${top}%`,\n      left: `${left}%`\n    };\n  };\n\n  // Function to change watermark position every second\n  const updateWatermarkPosition = () => {\n    const newPosition = getRandomPosition();\n    setPosition(newPosition);\n  };\n\n  // Decrypt video\n  const decryptVideo = useCallback(async (encryptedData, keyBase64, ivBase64) => {\n    try {\n      const encryptedWordArray = CryptoJS.enc.Base64.parse(encryptedData);\n      const keyWordArray = CryptoJS.enc.Base64.parse(keyBase64);\n      const ivWordArray = CryptoJS.enc.Base64.parse(ivBase64);\n      const decrypted = CryptoJS.AES.decrypt({\n        ciphertext: encryptedWordArray\n      }, keyWordArray, {\n        iv: ivWordArray,\n        mode: CryptoJS.mode.CFB,\n        padding: CryptoJS.pad.NoPadding\n      });\n      const decryptedBytes = new Uint8Array(decrypted.sigBytes);\n      const words = decrypted.words;\n      for (let i = 0; i < decrypted.sigBytes; i++) {\n        decryptedBytes[i] = words[i >>> 2] >>> 24 - i % 4 * 8 & 0xff;\n      }\n      return new Blob([decryptedBytes], {\n        type: \"video/mp4\"\n      });\n    } catch (error) {\n      console.error(\"Decryption Error:\", error);\n      setError('Failed to decrypt video content');\n      throw error;\n    }\n  }, []);\n\n  // Initialize player\n  const initPlayer = useCallback(async (videoElement, videoURL) => {\n    try {\n      await shaka.polyfill.installAll();\n      if (shaka.Player.isBrowserSupported()) {\n        if (playerRef.current) {\n          await playerRef.current.destroy();\n        }\n        const player = new shaka.Player(videoElement);\n        playerRef.current = player;\n        player.addEventListener('error', event => {\n          console.error('Shaka Player Error:', event.detail);\n          setError('Video playback error occurred');\n        });\n        await player.load(videoURL);\n      } else {\n        setError('Browser not supported for video playback');\n      }\n    } catch (error) {\n      console.error('Player initialization error:', error);\n      setError('Failed to initialize video player');\n    }\n  }, []);\n\n  // Fetch and process video\n  useEffect(() => {\n    let mounted = true;\n    let videoURL = null;\n    const fetchAndProcessVideo = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const response = await fetch(apiEndpoint);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        if (!data.encrypted_data || !data.key || !data.iv) {\n          throw new Error(\"Missing required encryption data\");\n        }\n        const decryptedVideo = await decryptVideo(data.encrypted_data, data.key, data.iv);\n        if (mounted) {\n          videoURL = URL.createObjectURL(decryptedVideo);\n          if (videoRef.current) {\n            await initPlayer(videoRef.current, videoURL);\n          }\n          setLoading(false);\n        }\n      } catch (error) {\n        console.error(\"Processing Error:\", error);\n        if (mounted) {\n          setError(error.message || 'Failed to process video');\n          setLoading(false);\n\n          // Fallback to local video when backend fails\n          videoURL = '/videos/videoplayback.mp4'; // Adjust path to your public folder\n          if (videoRef.current) {\n            videoRef.current.src = videoURL;\n            setLoading(false);\n          }\n        }\n      }\n    };\n    fetchAndProcessVideo();\n\n    // Update watermark position every second\n    const watermarkInterval = setInterval(updateWatermarkPosition, 1000);\n\n    // Handle fullscreen change\n    const handleFullscreenChange = () => {\n      if (document.fullscreenElement) {\n        // Adjust watermark position for fullscreen\n        setPosition(getRandomPosition());\n      }\n    };\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange);\n    return () => {\n      mounted = false;\n      if (playerRef.current) {\n        playerRef.current.destroy();\n      }\n      clearInterval(watermarkInterval); // Clean up interval\n      document.removeEventListener(\"fullscreenchange\", handleFullscreenChange); // Clean up event listener\n    };\n  }, [apiEndpoint, decryptVideo, initPlayer]);\n  const togglePlayPause = () => {\n    if (videoRef.current.paused) {\n      videoRef.current.play();\n      setIsPlaying(true);\n    } else {\n      videoRef.current.pause();\n      setIsPlaying(false);\n    }\n  };\n  const handleVolumeChange = e => {\n    const newVolume = e.target.value;\n    videoRef.current.volume = newVolume;\n    setVolume(newVolume);\n  };\n  const toggleFullscreen = () => {\n    if (videoRef.current.requestFullscreen) {\n      videoRef.current.requestFullscreen();\n    } else if (videoRef.current.mozRequestFullScreen) {\n      // Firefox\n      videoRef.current.mozRequestFullScreen();\n    } else if (videoRef.current.webkitRequestFullscreen) {\n      // Chrome, Safari, Opera\n      videoRef.current.webkitRequestFullscreen();\n    } else if (videoRef.current.msRequestFullscreen) {\n      // IE/Edge\n      videoRef.current.msRequestFullscreen();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video-container relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      className: \"video-player\",\n      controls: false,\n      autoPlay: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: watermarkRef,\n      className: \"watermark\",\n      style: {\n        top: position.top,\n        left: position.left,\n        zIndex: 99999\n      },\n      children: \"lalit - 7075654053\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"custom-controls absolute bottom-0 left-0 right-0 p-4 flex justify-between items-center bg-black bg-opacity-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: togglePlayPause,\n        className: \"play-pause-btn text-white text-2xl\",\n        children: isPlaying ? \"⏸️\" : \"▶️\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"range\",\n        min: \"0\",\n        max: \"1\",\n        step: \"0.01\",\n        value: volume,\n        onChange: handleVolumeChange,\n        className: \"volume-slider w-24\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleFullscreen,\n        className: \"fullscreen-btn text-white text-2xl\",\n        children: \"\\uD83D\\uDDD6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoPlayer, \"xkMO15d5EgoCDFm//1hblj55pfY=\");\n_c = VideoPlayer;\nexport default VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","shaka","CryptoJS","jsxDEV","_jsxDEV","VideoPlayer","apiEndpoint","_s","videoRef","playerRef","watermarkRef","loading","setLoading","error","setError","position","setPosition","top","left","isPlaying","setIsPlaying","volume","setVolume","getRandomPosition","Math","random","updateWatermarkPosition","newPosition","decryptVideo","encryptedData","keyBase64","ivBase64","encryptedWordArray","enc","Base64","parse","keyWordArray","ivWordArray","decrypted","AES","decrypt","ciphertext","iv","mode","CFB","padding","pad","NoPadding","decryptedBytes","Uint8Array","sigBytes","words","i","Blob","type","console","initPlayer","videoElement","videoURL","polyfill","installAll","Player","isBrowserSupported","current","destroy","player","addEventListener","event","detail","load","mounted","fetchAndProcessVideo","response","fetch","ok","Error","status","data","json","encrypted_data","key","decryptedVideo","URL","createObjectURL","message","src","watermarkInterval","setInterval","handleFullscreenChange","document","fullscreenElement","clearInterval","removeEventListener","togglePlayPause","paused","play","pause","handleVolumeChange","e","newVolume","target","value","toggleFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","className","children","ref","controls","autoPlay","fileName","_jsxFileName","lineNumber","columnNumber","style","zIndex","onClick","min","max","step","onChange","_c","$RefreshReg$"],"sources":["/Users/lalitbade/DRMLMS/drm-course-management-system/src/components/VideoPlayer.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from \"react\";\nimport shaka from \"shaka-player\";\nimport CryptoJS from \"crypto-js\";\n\nconst VideoPlayer = ({ apiEndpoint }) => {\n  const videoRef = useRef(null);\n  const playerRef = useRef(null);\n  const watermarkRef = useRef(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [position, setPosition] = useState({ top: \"10%\", left: \"10%\" });\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [volume, setVolume] = useState(1);  // Full volume by default\n\n  // Function to generate random position within the video\n  const getRandomPosition = () => {\n    const top = Math.random() * 80 + 10;  // Random position between 10% to 90% from the top\n    const left = Math.random() * 80 + 10;  // Random position between 10% to 90% from the left\n    return { top: `${top}%`, left: `${left}%` };\n  };\n\n  // Function to change watermark position every second\n  const updateWatermarkPosition = () => {\n    const newPosition = getRandomPosition();\n    setPosition(newPosition);\n  };\n\n  // Decrypt video\n  const decryptVideo = useCallback(async (encryptedData, keyBase64, ivBase64) => {\n    try {\n      const encryptedWordArray = CryptoJS.enc.Base64.parse(encryptedData);\n      const keyWordArray = CryptoJS.enc.Base64.parse(keyBase64);\n      const ivWordArray = CryptoJS.enc.Base64.parse(ivBase64);\n\n      const decrypted = CryptoJS.AES.decrypt(\n        { ciphertext: encryptedWordArray },\n        keyWordArray,\n        {\n          iv: ivWordArray,\n          mode: CryptoJS.mode.CFB,\n          padding: CryptoJS.pad.NoPadding\n        }\n      );\n\n      const decryptedBytes = new Uint8Array(decrypted.sigBytes);\n      const words = decrypted.words;\n      for (let i = 0; i < decrypted.sigBytes; i++) {\n        decryptedBytes[i] = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n      }\n\n      return new Blob([decryptedBytes], { type: \"video/mp4\" });\n    } catch (error) {\n      console.error(\"Decryption Error:\", error);\n      setError('Failed to decrypt video content');\n      throw error;\n    }\n  }, []);\n\n  // Initialize player\n  const initPlayer = useCallback(async (videoElement, videoURL) => {\n    try {\n      await shaka.polyfill.installAll();\n      if (shaka.Player.isBrowserSupported()) {\n        if (playerRef.current) {\n          await playerRef.current.destroy();\n        }\n\n        const player = new shaka.Player(videoElement);\n        playerRef.current = player;\n\n        player.addEventListener('error', (event) => {\n          console.error('Shaka Player Error:', event.detail);\n          setError('Video playback error occurred');\n        });\n\n        await player.load(videoURL);\n      } else {\n        setError('Browser not supported for video playback');\n      }\n    } catch (error) {\n      console.error('Player initialization error:', error);\n      setError('Failed to initialize video player');\n    }\n  }, []);\n\n  // Fetch and process video\n  useEffect(() => {\n    let mounted = true;\n    let videoURL = null;\n\n    const fetchAndProcessVideo = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const response = await fetch(apiEndpoint);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        if (!data.encrypted_data || !data.key || !data.iv) {\n          throw new Error(\"Missing required encryption data\");\n        }\n\n        const decryptedVideo = await decryptVideo(data.encrypted_data, data.key, data.iv);\n        if (mounted) {\n          videoURL = URL.createObjectURL(decryptedVideo);\n          if (videoRef.current) {\n            await initPlayer(videoRef.current, videoURL);\n          }\n          setLoading(false);\n        }\n      } catch (error) {\n        console.error(\"Processing Error:\", error);\n        if (mounted) {\n          setError(error.message || 'Failed to process video');\n          setLoading(false);\n\n          // Fallback to local video when backend fails\n          videoURL = '/videos/videoplayback.mp4'; // Adjust path to your public folder\n          if (videoRef.current) {\n            videoRef.current.src = videoURL;\n            setLoading(false);\n          }\n        }\n      }\n    };\n\n    fetchAndProcessVideo();\n\n    // Update watermark position every second\n    const watermarkInterval = setInterval(updateWatermarkPosition, 1000);\n\n    // Handle fullscreen change\n    const handleFullscreenChange = () => {\n      if (document.fullscreenElement) {\n        // Adjust watermark position for fullscreen\n        setPosition(getRandomPosition());\n      }\n    };\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange);\n\n    return () => {\n      mounted = false;\n      if (playerRef.current) {\n        playerRef.current.destroy();\n      }\n      clearInterval(watermarkInterval);  // Clean up interval\n      document.removeEventListener(\"fullscreenchange\", handleFullscreenChange);  // Clean up event listener\n    };\n  }, [apiEndpoint, decryptVideo, initPlayer]);\n\n  const togglePlayPause = () => {\n    if (videoRef.current.paused) {\n      videoRef.current.play();\n      setIsPlaying(true);\n    } else {\n      videoRef.current.pause();\n      setIsPlaying(false);\n    }\n  };\n\n  const handleVolumeChange = (e) => {\n    const newVolume = e.target.value;\n    videoRef.current.volume = newVolume;\n    setVolume(newVolume);\n  };\n\n  const toggleFullscreen = () => {\n    if (videoRef.current.requestFullscreen) {\n      videoRef.current.requestFullscreen();\n    } else if (videoRef.current.mozRequestFullScreen) { // Firefox\n      videoRef.current.mozRequestFullScreen();\n    } else if (videoRef.current.webkitRequestFullscreen) { // Chrome, Safari, Opera\n      videoRef.current.webkitRequestFullscreen();\n    } else if (videoRef.current.msRequestFullscreen) { // IE/Edge\n      videoRef.current.msRequestFullscreen();\n    }\n  };\n\n  return (\n    <div className=\"video-container relative\">\n      <video ref={videoRef} className=\"video-player\" controls={false} autoPlay />\n      {/* Watermark on top of video */}\n      <div\n        ref={watermarkRef}\n        className=\"watermark\"\n        style={{ top: position.top, left: position.left, zIndex: 99999 }}\n      >\n        lalit - 7075654053\n      </div>\n\n      {/* Custom Controls */}\n      <div className=\"custom-controls absolute bottom-0 left-0 right-0 p-4 flex justify-between items-center bg-black bg-opacity-50\">\n        <button onClick={togglePlayPause} className=\"play-pause-btn text-white text-2xl\">\n          {isPlaying ? \"⏸️\" : \"▶️\"}\n        </button>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n          value={volume}\n          onChange={handleVolumeChange}\n          className=\"volume-slider w-24\"\n        />\n        <button onClick={toggleFullscreen} className=\"fullscreen-btn text-white text-2xl\">\n          🗖\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoPlayer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}